{{ ansible_managed | comment }}

# Full configuration options can be found at https://www.nomadproject.io/docs/configuration

data_dir = "{{ nomad_data_dir }}"
bind_addr = "{{ nomad_bind_addr }}"
log_level = "{{ nomad_log_level }}"
datacenter = "{{ nomad_datacenter }}"

server {
  enabled = {{ nomad_server | to_json }}
  bootstrap_expect = {{ nomad_server_bootstrap_expect }}
}

client {
  enabled = {{ nomad_agent | to_json }}
}

plugin "docker" {
  config {
    allow_privileged = true
    volumes {
      enabled = true
    }
  }
}
